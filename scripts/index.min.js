let scale=1,currentScreen="loaderScreen";const animationScreenEnd={};let bottleStartOffset,boxBadgeStartOffsetTop,boxBadgeStartOffsetLeft,animationNextStop=!1,animationStop=!1,laptopTextInterval=[];const preloaderVideos={e:{t:"video/webm",o:"vp9",n:"/media/video/preloader_vp9.webm"},c:{t:"video/webm",o:"vp8",n:"/media/video/preloader_vp8.webm"},i:{t:"video/quicktime",o:"hvc1",n:"/media/video/preloader_hevc.mov"}},quizData={a:[{t:"MULTI_CHOICE",d:"Какая одежда необходима?",s:["Футболки","Поло","Жилеты","Куртка (ветровка)","Худи (толстовка)","Фартук","Нужно нанесение принта на готовое изделие"],r:"Свой вариант"},{t:"INPUT",d:"Какое количество необходимо?",l:"Укажите общее количество (минимальный тираж 30 шт.)"},{t:"CHOICE",d:"Нужно ли нанесение логотипа (принта)?",s:["Нужно, есть макет","Нужно, нет макета","Не нужно"]}],u:[{t:"MULTI_CHOICE",d:"Какие аксессуары необходимы?",s:["Бейдж с лентой","Внешний аккумулятор / powerbank","Ежедневник","Ручка","Термостакан / бутылка для воды","Стикерпак с локальными мемами","Шоппер","Беспроводные наушники","Бейсболка","Футболка с принтом"],r:"Свой вариант"},{t:"INPUT",d:"Какое количество необходимо?",l:"Укажите общее количество (минимальный тираж 30 шт.)"},{t:"CHOICE",d:"Нужно ли нанесение логотипа (принта)?",s:["Нужно, есть макет","Нужно, нет макета","Не нужно"]}],p:[{t:"MULTI_CHOICE",d:"Какие позиции необходимы?",s:["Внешний аккумулятор / powerbank","Термостакан / бутылка для воды","Вместительная сумка-шоппер","Рюкзак","Плед / декоративная подушка","Зонт","Футболка","Худи"],r:"Свой вариант"},{t:"INPUT",d:"Какое количество необходимо?",l:"Укажите общее количество (минимальный тираж 30 шт.)"},{t:"CHOICE",d:"Нужно ли нанесение логотипа (принта)?",s:["Нужно, есть макет","Нужно, нет макета","Не нужно"]}]},productsData={m:{t:"product",f:"Хочу выделяться\nво время конференции",S:"Хотите заказать одежду со свои логотипом или фирменным стилем? Пройдите небольшую анкенту для того, чтобы мы могли подготовить для вас наилучшее предложение.",x:"Хотите заказать аксессуары для конференции?",h:"/media/video/conference",v:"Аксессуары для конференции",b:"office"},p:{t:"product",f:"Хочу подарки\nна праздники",S:"Хотите заказать одежду со свои логотипом или фирменным стилем? Пройдите небольшую анкенту для того, чтобы мы могли подготовить для вас наилучшее предложение.",x:"Хотите заказать подарки на праздники?",h:"/media/video/gift",v:"Подарки на праздники",b:"gift"},z:{t:"product",f:"Хочу мерч\nдля продажи",S:"Хотите заказать одежду со свои логотипом или фирменным стилем? Пройдите небольшую анкенту для того, чтобы мы могли подготовить для вас наилучшее предложение.",x:"Хотите заказать мерч для продажи?",h:"/media/video/merch",v:"Мерч для продажи",b:"gift"},y:{t:"product",f:"Хочу одежду\nсо своим брендигом",S:"Хотите заказать одежду со свои логотипом или фирменным стилем? Пройдите небольшую анкенту для того, чтобы мы могли подготовить для вас наилучшее предложение.",x:"Хотите заказать одежду со своим брендингом?",h:"/media/video/branding",v:"Одежда с брендингом",b:"clothes"},g:{t:"product",f:"Хочу одеть\nсвоих сотрудников",S:"Хотите заказать одежду со свои логотипом или фирменным стилем? Пройдите небольшую анкенту для того, чтобы мы могли подготовить для вас наилучшее предложение.",x:"Хотите заказать одежду для своих сотрудников?",h:"/media/video/corp",v:"Одежда для сотрудников",b:"clothes"},w:{t:"product",f:"Хочу аксессуары\nдля офиса",S:"Хотите заказать одежду со свои логотипом или фирменным стилем? Пройдите небольшую анкенту для того, чтобы мы могли подготовить для вас наилучшее предложение.",x:"Хотите заказать аксессуары для офиса?",h:"/media/video/office",v:"Аксессуары для офиса",b:"office"},$:{t:"product",f:"Хочу сувениры\nдля спорта и отдыха",S:"Хотите заказать одежду со свои логотипом или фирменным стилем? Пройдите небольшую анкенту для того, чтобы мы могли подготовить для вас наилучшее предложение.",x:"Хотите заказать сувениры для спорта и отдыха?",h:"/media/video/souvenir",v:"Сувениры для спорта и отдыха",b:"gift"},q:{t:"product",f:"Хочу welcome-pack\nдля сотрудников",S:"Хотите заказать одежду со свои логотипом или фирменным стилем? Пройдите небольшую анкенту для того, чтобы мы могли подготовить для вас наилучшее предложение.",x:"Хотите заказать welcome-pack для своих сотрудников?",h:"/media/video/welcome",v:"Welcome-pack",b:"office"},T:{t:"service",f:"Хотите заказать такую же\nпромо страницу?",S:'У вас есть продукт, который нужно эффектно представить потенциальной аудитории? Хотите видеть на вашей странице подобную анимацию? Тогда отправляйте свой запрос нам на почту <a href="mailto:info@topline.ru">info@topline.ru</a> и в ближайшее время наш менеджер свяжется с вами.',x:"Хотите заказать такую же промо страницу?"}},getDisplayedEl=e=>{for(let t of e){if("none"!==getComputedStyle(t).k)return t}},getAttr=(e,t,o)=>{const n=getDisplayedEl(e);if(n){const e=n.O[t];return isNaN(+e)?"true"===e||"false"!==e&&n.O[t]:+e}return o},moveToTop=()=>{const e=document.C(".modal.open");for(let t of e)t.I.B("open"),t.I.A("product")&&closeFullVideoOrQuiz(!1),zIndex-=1,t.V.M="";for(let e of document.C(".contentWrapper"))e.V.M="",e.V.P="",e.V._="";dispatchAnimationEnd("firstScreen",!1,0,()=>{moveTo(0),rollbackAnimation()}),animationStop=!1},resizeContent=()=>{bottleStartOffset=void 0,boxBadgeStartOffsetTop=void 0,boxBadgeStartOffsetLeft=void 0;const e=document.N("hiddenContent"),{Q:t}=document;scale=Math.min(t.F/e.F,t.H/e.H);const o=document.L("headerWrapper");for(let e of o){e.V.Y=`scaleY(${scale})`;for(let t of e.K)t.V.Y=`scaleX(${scale})`,t.V._="1"}const n=document.L("content");for(let e of n)e.V.Y=`scale(${scale})`,e.V._="1";const c=document.N("menuModalButtons");c.V.Y=`scale(${scale})`,c.U.V.D=`${100/scale}%`;const i=document.N("productNavigator");i.V.D=`${100/scale}%`,i.V.Y=`scale(${scale})`;const a=document.L("menuHintContent");for(let e of a)e.V.Y=`scale(${scale})`,e.V._="1"},animateFirstScreen=({W:e,j:t})=>{const o=document.J("#firstScreen .content"),n=o.R||o.X,c=document.N("layer2"),i=o.H*scale,a=Math.floor((n.H-i)/scale);if(animationScreenEnd.G=n.H,e>0)if(e<n.H){const t=1-(n.H-e)/n.H;c.V.P=`-${t*(o.H+a)}px`}else c.V.P=`-${o.H+a}px`,dispatchAnimationEnd("secondScreen",!1);else 0===e&&t<0&&(c.V.P="0px")},animateSecondScreen=({W:e,j:t})=>{const o=e-animationScreenEnd.G,n=document.J("#secondScreen .content"),c=n.R||n.X,i=document.N("secondText"),a=document.N("clothesImages"),d=document.J("#secondScreen .eye"),s=n.F*scale,r=Math.floor((c.F-s)/2/scale),l=n.F+r;if(animationScreenEnd.Z=animationScreenEnd.G+4*c.H,t<0&&o<=0)c.V._="0",i.V.P="100%",dispatchAnimationEnd("firstScreen",!0,300),a.V._="0",a.V.M="-1";else if(o<c.H){const e=(c.H-o)/c.H;a.V._="1",a.V.M="2",a.V.ee=`${l}px`,i.V.P=`${n.H*e}px`}else if(o<2*c.H){i.V.P="0px";const e=(2*c.H-o)/c.H,t=getAttr(n.L("tShirt"),"stop",0),s=Math.round((l-t)*e+t);a.V._="1",a.V.M="2",a.V.ee=`${s}px`,d.V.te="opacity 0.3s, z-index 0s 0.3s, width 0.3s, height 0.3s, font-size 0.3s",d.V.M="-1",d.V._="0"}else if(o<2.5*c.H){const e=getAttr(n.L("tShirt"),"stop",0);a.V._="1",a.V.M="2",a.V.ee=`${e}px`,d.V.te="opacity 0.3s, width 0.3s, height 0.3s, font-size 0.3s",d.V.M="3",d.V._="1",d.O.oe="tShirt"}else if(o<3*c.H){d.V.te="opacity 0.3s, z-index 0s 0.3s, width 0.3s, height 0.3s, font-size 0.3s",d.V._="0",d.V.M="-1";const e=(3*c.H-o)/(c.H/2),t=getAttr(n.L("tShirt"),"stop",0),i=getAttr(n.L("apron"),"stop",0),s=Math.round((t-i)*e+i);a.V._="1",a.V.M="2",a.V.ee=`${s}px`}else if(o<3.5*c.H){const e=getAttr(n.L("apron"),"stop",0);a.V._="1",a.V.M="2",a.V.ee=`${e}px`,d.V.te="opacity 0.3s, width 0.3s, height 0.3s, font-size 0.3s",d.V.M="3",d.V._="1",d.O.oe="apron"}else if(o<4*c.H){d.V.te="opacity 0.3s, z-index 0s 0.3s, width 0.3s, height 0.3s, font-size 0.3s",d.V.M="-1",d.V._="0";const e=getAttr(n.L("apron"),"stop",0),t=1-(4*c.H-o)/(c.H/2);a.V._="1",a.V.M="2",a.V.ee=`calc(${e-r*t}px - ${100*t}%)`}else e>=animationScreenEnd.Z&&(d.V.te="opacity 0.3s, z-index 0s 0.3s, width 0.3s, height 0.3s, font-size 0.3s",d.V._="0",d.V.M="-1",i.V.P="0",dispatchAnimationEnd("cupScreen",!1))},animateCupScreen=({W:e,j:t})=>{const o=e-animationScreenEnd.Z,n=document.J("#cupScreen .content"),c=n.R||n.X,i=document.N("cup"),a=document.N("cupText"),d=document.J("#cupScreen .eye"),s=n.F*scale,r=n.H*scale,l=Math.floor((c.F-s)/2/scale),u=Math.floor((c.H-r)/2/scale);(!i.V.P||t>0&&i.V.P===`calc(100% + ${u}px)`)&&(i.V.P=`calc(100% + ${u}px)`,i.V._="1",i.V.te="top 0.5s",i.V.P=`calc((100% - ${i.H}px) / 2)`,i.V.te="top 0.5s, opacity 0.3s"),a.V.P||(a.V.ee=`calc(100% + ${l}px)`,a.V._="1");const p=n.F+a.F+2*l;if(animationScreenEnd.ne=animationScreenEnd.Z+p,o<=0)d.V._="0",i.V._="1",i.V.Y="rotate(0deg)",t<0?(i.V.P=`calc(100% + ${u}px)`,dispatchAnimationEnd("secondScreen",!0)):i.V.P=`calc((100% - ${i.H}px) / 2)`,a.V.ee=`calc(100% + ${l}px)`;else if(e>=animationScreenEnd.ne)d.V._="0",i.V._="0",i.V.Y="rotate(360deg)",a.V.ee=`calc(100% + ${l}px - ${animationScreenEnd.ne}px)`,dispatchAnimationEnd("bottleScreen",!1,500);else{d.V._=o>=p/3&&o<.95*p?"1":"0",i.V._="1";const e=o/p*360;i.V.Y=`rotate(${-e}deg)`,a.V.ee=`calc(100% + ${l}px - ${o}px)`}},animateBottleScreen=({W:e,j:t})=>{const o=e-animationScreenEnd.ne,n=document.J("#bottleScreen .content"),c=n.R||n.X,i=document.L("bottle"),a=getDisplayedEl(i),d=getAttr(i,"rotate",!0),s=getAttr(i,"stop",!0),r=document.N("bottleText"),l=document.J("#bottleScreen .eye"),u=n.H*scale,p=Math.floor((c.H-u)/2/scale),m=n.H+2*p;if(animationScreenEnd.ce=animationScreenEnd.ne+2.5*m,void 0===bottleStartOffset&&(bottleStartOffset=a.ie),t<0&&o<=0)l.V._="0",a.V.P="",r.V._="0",dispatchAnimationEnd("cupScreen",!0);else if(o<m){l.V._="0";const e=o/m;if(d){r.V._="0",a.V.P=`calc(${50*e}% - ${a.H/2*e}px + ${bottleStartOffset*(1-e)}px)`;const t=90*e;a.V.Y=`rotate(${t}deg)`}else r.V._=o>.3*m?"1":"0",a.V.P=`calc(${bottleStartOffset*(1-e)}px + ${s*e}px - ${a.H*e}px)`}else if(o<2*m)if(r.V._="1",d){l.V._="0";const e=(o-m)/m;a.V.Y="rotate(90deg)";const t=`(50% - ${a.H/2}px)`;a.V.P=`calc(${t} - (50% * ${e}))`}else l.V._="1",a.V.P=`${s-a.H}px`;else e<animationScreenEnd.ce?(l.V._="1",a.V.P=d?`calc(-${a.H/2}px)`:`${s-a.H}px`):(a.V.P=d?`calc(-${a.H/2}px)`:`${s-a.H}px`,dispatchAnimationEnd("boxScreen",!1))},animateBoxScreen=({W:e,j:t})=>{const o=e-animationScreenEnd.ce,n=document.J("#boxScreen .content"),c=n.R||n.X,i=document.N("box"),a=document.N("boxCover"),d=document.N("boxBadge"),s=document.J("#boxScreen .eye"),r=n.H*scale,l=Math.floor((c.H-r)/2/scale),u=n.H+2*l;if(animationScreenEnd.ae=animationScreenEnd.ce+5.3*u,void 0===boxBadgeStartOffsetTop&&(boxBadgeStartOffsetTop=d.ie),void 0===boxBadgeStartOffsetLeft&&(boxBadgeStartOffsetLeft=d.de),t<0&&(i.V._="1"),t<0&&o<=0)i.V.Y="scale(0)",s.V._="0",s.V.M="-1",dispatchAnimationEnd("bottleScreen",!0);else if(o<u){s.V._="0",s.V.M="-1";const e=o/u;i.V.Y=`scale(${e})`,a.V.P="0px"}else if(o<2*u){o<1.8*u?(s.V._="0",s.V.M="-1",s.se="eye modalOpen",s.O.oe=""):(s.V._="1",s.V.M="3",s.se="eye modalOpen tShirtEye",s.O.oe="welcome"),i.V.Y="scale(1)";const e=(o-u)/u,t=(a.H-25)*e;a.V.P=`${t}px`}else if(o<2.3*u){s.V._="1",s.V.M="3",s.se="eye modalOpen tShirtEye",s.O.oe="welcome";const e=a.H-25;a.V.P=`${e}px`,d.V.Y="",d.V.P="",d.V.ee="",d.V.M=""}else if(o<2.8*u){const e=2*(2.8*u-o)/u;s.V._="0",s.V.M="-1",s.se="eye modalOpen",s.O.oe="",d.V.Y=`scale(${1+3.2*(1-e)}) rotate(${39*(1-e)-46*e}deg)`,d.V.P=`${boxBadgeStartOffsetTop*e+(i.H-d.H)/2*(1-e)}px`,d.V.ee=`${boxBadgeStartOffsetLeft*e+(i.F-d.F)/2*(1-e)}px`,d.V.M="2"}else if(o<3.8*u)s.V._="1",s.V.M="3",s.se="eye modalOpen boxBadgeEye",s.O.oe="id",d.V.Y="scale(4.2) rotate(39deg)",d.V.P=`${(i.H-d.H)/2}px`,d.V.ee=`${(i.F-d.F)/2}px`,d.V.M="2";else if(o<4.3*u){s.V._="0",s.V.M="-1",s.se="eye modalOpen",s.O.oe="";const e=2*(4.3*u-o)/u;d.V.Y=`scale(${1+3.2*e}) rotate(${39*e-46*(1-e)}deg)`,d.V.P=`${boxBadgeStartOffsetTop*(1-e)+(i.H-d.H)/2*e}px`,d.V.ee=`${boxBadgeStartOffsetLeft*(1-e)+(i.F-d.F)/2*e}px`,d.V.M="2"}else if(e<animationScreenEnd.ae){s.V._="0",s.V.M="-1",s.se="eye modalOpen",s.O.oe="",d.V.Y="",d.V.P="",d.V.ee="",d.V.M="";const e=(o-4.3*u)/u,t=a.H-25,n=t-t*e;a.V.P=`${n}px`}else s.V._="0",s.V.M="-1",a.V.P="0px",i.V._="0",dispatchAnimationEnd("laptopScreen",!1,500)},animateLaptopScreen=({W:e,j:t})=>{const o=e-animationScreenEnd.ae,n=document.J("#laptopScreen .content"),c=document.J("#footer .content"),i=n.R||n.X,a=document.J("#laptopScreen .eye"),d=c.H*scale;if(animationScreenEnd.re=animationScreenEnd.ae+d,t<0&&e<=animationScreenEnd.ae){a.V._="0",laptopTextInterval.length&&(laptopTextInterval.forEach(clearInterval),laptopTextInterval=[]),document.N("laptopText").le="",dispatchAnimationEnd("boxScreen",!0)}else e<=animationScreenEnd.re?i.V.P=`-${o}px`:(i.V.P=`-${d}px`,animationNextStop=!0)},animate=({ue:e={}})=>{switch(currentScreen){case"firstScreen":animateFirstScreen(e);break;case"secondScreen":animateSecondScreen(e);break;case"cupScreen":animateCupScreen(e);break;case"bottleScreen":animateBottleScreen(e);break;case"boxScreen":animateBoxScreen(e);break;case"laptopScreen":animateLaptopScreen(e)}},rollbackAnimation=()=>{const e={W:0,j:-1};animateFirstScreen(e),animateSecondScreen(e),animateCupScreen(e),animateBottleScreen(e),animateBoxScreen(e),animateLaptopScreen(e)},defaultActivateScreen=(e,t,o)=>{if(document.N("footer").V.M="-1",animationNextStop=!0,t){const t=document.N(e),n=t.pe;if(n){if(!o){const e=o=>{o.me===n&&(t.V.M="2",n.V.M="",animationNextStop=!1,n.fe("transitionend",e))};n.Se("transitionend",e)}n.V.P="100%"}}else{const t=document.N(e);if(t){o||t.Se("transitionend",e=>{e.me===t&&(animationNextStop=!1)});const e=t.xe;e.I.A("contentWrapper")&&(e.V.M="1"),t.V.P="0",t.V._="1",t.V.M="2"}}},activateLaptopScreen=()=>{const e=document.N("laptopScreen"),t=document.N("footer"),o=document.J("#laptopScreen .eye"),n=document.N("laptopText"),c=n.O.S;e.V.M="3",t.V.M="2",t.V._="1",o.V._="0";let i=0;laptopTextInterval.push(setInterval(()=>{(e=>{n.le=c.substring(0,e)})(i),i>=c.length&&(laptopTextInterval.forEach(clearInterval),laptopTextInterval=[],o.V._="1",e.V.he="1s linear 0s prevFooter",animationNextStop=!1),i+=1},100))},changeCurrentScreen=e=>{const{ve:t,be:o,ze:n,ye:c}=e.ue;n&&(animationStop=!0),setTimeout(()=>{switch(animationStop=!1,t){case"firstScreen":defaultActivateScreen(t,o),animationNextStop=!1;break;case"secondScreen":case"cupScreen":case"bottleScreen":case"boxScreen":defaultActivateScreen(t,o);break;case"laptopScreen":defaultActivateScreen(t,o,!0),activateLaptopScreen()}currentScreen=t,c&&c()},n)},moveTo=e=>{const t=new CustomEvent("moveTo",{ue:{ge:e}});window.we(t)},getStopPseudoScroll=e=>!!animationStop||(e<0&&(animationNextStop=!1),animationNextStop),startMainFlow=()=>{const e=document.N("preloader"),t=document.J("#preloader .content"),o=t.R||t.X,n=document.N("preloaderRound"),c=document.N("preloaderButton"),i=Math.max(o.H,o.F)/scale*2;dispatchAnimationEnd("firstScreen",!1),n.V.$e=`${i}px`,n.V.D=`${i}px`;const a=window.qe/window.Te<.75,d=1.33>window.qe/window.Te>=.75;if(a?(c.V.ke="20px",c.V.$e="40px",c.V.D="280px"):d?(c.V.ke="32px",c.V.$e="64px",c.V.D="343px"):(c.V.ke="90px",c.V.$e="64px",c.V.D="343px"),e.V._="0.1",e.Se("transitionend",()=>{e.I.B("open")}),window.Oe.Ee)setTimeout(()=>{for(let e of document.C("#firstScreen .eye"))e.I.add("active")},1e3);else{animationStop=!0;const e=document.N("modalHint");zIndex+=1,e.V.M=zIndex.toString(),e.I.add("open")}};let videoStarted=!1;const preloaderActivate=({me:e})=>{if(!videoStarted){videoStarted=!0;const{Ce:t}=e,o=document.J("#preloader .content"),n=o.R||o.X,c=document.N("preloaderText"),i=o.F*scale,a=Math.floor((n.F-i)/2/scale);c.V.ee=`calc(100% + ${a}px)`,c.V.te=`left ${t}s`,c.V.ee=`-${c.F+a}px`,c.V._="1"}},preloaderVideoEnd=()=>{const e=document.N("preloader");document.N("preloaderButton").Se("click",startMainFlow),e.I.add("videoEnd")},videoSample=e=>{e.me.Be>2&&(e.me.Be=0)},closeModal=e=>{let{me:t}=e,o=0;for(;!t.I.A("modalClose")&&o<10;)t=t.R||t.X,o+=1;const n=document.C(".modalOpen.hideOnClick"),{Ie:c}=t.O,i=document.N(c);for(let e of n)e.O.Ie===c&&(e.V._="");i&&(i.I.B("open"),i.I.B("inactiveVideoOrQuiz"),zIndex-=1,i.V.M="",animationStop=!1)},closeFullVideoOrQuiz=(e=!0)=>{const t=document.N("productBlock"),o=document.N("modalProduct"),n=document.N("backButton"),c=document.N("playButton"),i=document.J("#modalProduct video"),a=document.N("infoBlock"),d=document.N("quizBlock");c.V.k="",setTimeout(()=>{a.V.k="",d.V.k=""},200),setTimeout(()=>{t.V.$e=""},1200),n.fe("click",closeFullVideoOrQuiz),n.Se("click",closeModal),o.I.B("activeVideo"),o.I.B("activeQuiz"),e&&o.I.add("inactiveVideoOrQuiz"),i&&i.Se("timeupdate",videoSample)},playFullVideo=()=>{const e=document.N("modalProduct"),t=document.N("backButton");document.N("playButton").V.k="none",t.fe("click",closeModal),t.Se("click",closeFullVideoOrQuiz),e.I.B("inactiveVideoOrQuiz"),e.I.add("activeVideo")},fullScreenChange=e=>{let t=document.Ae;!t&&document.Me?t=document.Me:!t&&document.Ve&&(t=document.Ve);const o=document.J("#modalProduct video");e.me===t?(o.fe("timeupdate",videoSample),e.me.I.add("mobileHorizontal")):(o.Se("timeupdate",videoSample),e.me.I.B("mobileHorizontal"))},fullScreenVideo=()=>{const e=document.J("#modalProduct video");e.Pe=void 0,e.fe("timeupdate",videoSample),e._e?e._e():e.Ne?e.Ne():e.Qe?e.Qe():e.Fe?e.Fe():e.He&&e.He()},setQuizStep=e=>()=>{const t=document.N("quizQuestion"),o=t.le-1;if(Number.isInteger(e))t.le=e+1;else{document.N("quizTitle").le="Оставьте свои контакты и имя",document.N("quizCounter").V.k="none"}document.N("question_"+o).I.B("active"),document.N("question_"+e).I.add("active")},submitQuiz=e=>{e.Le();const t=document.N("quiz"),o=new window.Ye(t),n=o.get("quizKey"),c=quizData[n];let i=o.get("quizName");const a=Array.from(o.keys()).filter((e,t,o)=>o.indexOf(e)===t);c.forEach((e,t)=>{i+="\n"+e.d,a.forEach(e=>{e.includes("question_"+t)&&(i+="\n"+o.Ke(e).join("\n"))})});const d={De:window.We.Ue,je:o.get("name"),Je:o.get("phone"),Re:o.get("mail"),Xe:i};fetch("http://new.topline.gq/n8n/webhook/promo_orders",{Ge:"POST",Ze:{et:"application/json;charset=utf-8"},Q:JSON.stringify(d)}).then(()=>{document.N("quizTitle").le="Уже видим Ваш запрос!",document.C("#quizBlock .question.active").forEach(e=>{e.I.B("active")});const e=document.tt("h2");e.se="message",e.le="Вернемся с расчетом бюджета и сроков в самое ближайшее время",t.ot(e)})},checkAnswer=(e,t)=>()=>{const o=document.N("quiz"),n=Array.from(new window.Ye(o).entries()).find(([t,o])=>t.includes("question_"+e)&&o);t.nt=!n},checkContact=e=>()=>{const t=document.N("quiz"),o=new window.Ye(t),n=o.get("phone").length>=16,c=o.get("mail"),i=/[^@]+@[^@]+\.[^@.]+/.test(c);e.nt=!(o.get("name")&&(n||i))},startQuiz=e=>()=>{const t=document.N("modalProduct"),o=document.N("productBlock"),n=document.N("backButton"),c=document.N("infoBlock"),i=document.N("quizBlock"),a=document.N("quiz");a.Se("submit",e=>e.Le()),a.ct="";const d=quizData[e.b],s=document.tt("div");s.se="quizHeader";const r=document.tt("h1");r.se="quizTitle",r.m="quizTitle",r.le=e.v,s.ot(r);const l=document.tt("div");l.se="quizCounter",l.m="quizCounter";const u=document.tt("span");u.le="1",u.m="quizQuestion",l.ot(u);const p=document.tt("span");p.le=d.length.toString(),l.ot(p),s.ot(l),a.ot(s);const m=document.tt("input");m.name="quizKey",m.t="hidden",m.it=e.b,a.ot(m);const f=document.tt("input");f.name="quizName",f.t="hidden",f.it=e.v,a.ot(f),d.forEach((e,t)=>{const o=document.tt("div");o.se=t?"question":"question active",o.m="question_"+t;const n=document.tt("h2");n.le=e.d,o.ot(n);const c=document.tt("button");if("MULTI_CHOICE"===e.t){const i=document.tt("i");i.le="(можно выбрать несколько вариантов)",n.ot(i);const a=document.tt("fieldset");e.s.forEach(e=>{const o=document.tt("label");o.se="checkbox";const n=document.tt("input");n.t="checkbox",n.name="question_"+t+"_choice",n.it=e,n.Se("change",checkAnswer(t,c)),o.ot(n);const i=document.tt("span");i.le=e,o.ot(i),a.ot(o)}),o.ot(a)}if("CHOICE"===e.t){const n=document.tt("fieldset");e.s.forEach(e=>{const o=document.tt("label");o.se="radio";const i=document.tt("input");i.t="radio",i.name="question_"+t+"_choice",i.it=e,i.Se("change",checkAnswer(t,c)),o.ot(i);const a=document.tt("span");a.le=e,o.ot(a),n.ot(o)}),o.ot(n)}if("INPUT"===e.t){const n=document.tt("textarea");n.name="question_"+t+"_text",n.l=e.l,n.Se("input",checkAnswer(t,c)),o.ot(n)}if(e.r){const n=document.tt("textarea");n.name="question_"+t+"_text",n.l=e.r,n.Se("input",checkAnswer(t,c)),o.ot(n)}const i=document.tt("div");if(i.se="buttons",t){const e=document.tt("button");e.se="button border blue",e.ct="<span>Назад</span>",e.Se("click",setQuizStep(t-1)),i.ot(e)}c.se="button blue",c.nt=!0,t<d.length-1?(c.ct="<span>Дальше</span>",c.Se("click",setQuizStep(t+1))):(c.ct="<span>Оформить</span>",c.Se("click",setQuizStep("contact"))),i.ot(c),o.ot(i),a.ot(o)});{const e=document.tt("button"),t=document.tt("div");t.se="question",t.m="question_contact";const o=document.tt("input");o.name="name",o.l="Имя",o.Se("input",checkContact(e)),t.ot(o);const n=document.tt("input");n.t="phone",n.name="phone",n.l="+7 (",IMask(n,{dt:"+{7}(000)000-00-00"}),n.Se("input",checkContact(e)),t.ot(n);const c=document.tt("input");c.name="mail",c.l="test@test.com",c.Se("input",checkContact(e)),t.ot(c),e.se="submit button blue",e.ct="<span>Отправить</span>",e.nt=!0,e.Se("click",submitQuiz),t.ot(e),a.ot(t)}o.V.$e=`${o.H}px`,n.fe("click",closeModal),n.Se("click",closeFullVideoOrQuiz),setTimeout(()=>{t.I.B("inactiveVideoOrQuiz"),t.I.add("activeQuiz")},10),setTimeout(()=>{c.V.k="none",i.V.k="flex"},1e3)},activateProduct=(e,t=!0)=>{document.N("modalProduct").I.B("activeVideo");const o=e.charAt(0).toUpperCase()+e.slice(1),n="product"+o,c="navigator"+o,i=document.N(n),a=i.R||i.X;for(let e of a.K)if(e!==i&&e.I.A("active")){if(t){const t=[{P:"unset",ee:"unset",ke:0,st:0,_:1,Y:"none"},{P:"unset",ee:"unset",ke:"-50%",st:"-100%",_:0,Y:"rotate(32deg)"},{P:"unset",ee:"unset",ke:"-50%",st:"-100%",_:0,Y:"rotate(32deg)"}],o={Ce:800,rt:1};e.lt(t,o)}e.I.B("active")}i.I.add("active");const d=document.N(c),s=d.R||d.X;for(let e of s.K)e!==d&&e.I.B("active");d.I.add("active"),s.ut(d.de-s.F/2,0);const r=productsData[e];document.N("productTitle").ct=r.f,document.N("productText").ct=r.S,document.N("productShortText").ct=r.x;const l=document.N("quizButton"),u=document.N("mailButton"),p=document.N("productVideo"),m=document.N("playButton"),f=document.N("playButtonMobile"),S=document.N("downloadButton"),x=document.N("downloadButtonMobile"),h=p.pt("video");for(;h.length;)h.mt(0).B();if("service"===r.t)l.V.k="none",u.V.k="flex",m.V.k="none",f.V.k="none",S.V.k="flex",x.V.k="flex",p.I.add("empty"),p.V.$e="",p.V.D="";else if("product"===r.t){u.V.k="none",l.V.k="flex",S.V.k="none",x.V.k="none",m.V.k="flex",f.V.k="flex",p.I.B("empty");const e=document.tt("video");e.Se("timeupdate",videoSample),e._e?e.Se("fullscreenchange",fullScreenChange):e.Fe?e.Se("mozfullscreenchange",fullScreenChange):e.Qe&&e.Se("webkitfullscreenchange",fullScreenChange),e.ft=!0,e.St=!0,e.Pe=!0;const t=document.tt("source");t.n=r.h+".webm",t.t="video/webm",e.ot(t);const o=document.tt("source");o.n=r.h+".mp4",o.t="video/mp4",e.ot(o),p.xt(e,p.ht),m.Se("click",playFullVideo),f.Se("click",fullScreenVideo),l.Se("click",startQuiz(r))}};let zIndex=1e4;const addEvents=()=>{window.Se("resize",resizeContent),window.Se("pseudoScroll",animate),window.Se("animationEnd",changeCurrentScreen);const e=document.J("#preloader video");e.Se("play",preloaderActivate),e.Se("timeupdate",preloaderActivate),e.Se("ended",preloaderVideoEnd);const t=document.L("modalOpen"),o=document.L("modalClose");for(let e of t){const{I:t,O:o}=e,{Ie:n}=o;t.A("eye")?(e.Se("transitionend",t=>{if("width"===t.vt){let{me:c}=t;if("1"===t.me.O.bt){t.me.O.bt="";let i=0;for(;!c.I.A("modalOpen")&&i<10;)c=c.R||c.X,i+=1;if(c===e){const{oe:e}=o,t=document.N(n);t.I.add("open"),zIndex+=1,t.V.M=zIndex.toString(),activateProduct(e,!1),c.V.P=c.O.P,c.V.ee=c.O.ee,c.V.$e=c.O.$e,c.V.D=c.O.D,c.V.zt=c.O.zt,c.V.te=c.O.te,c.V.M=c.O.M,animationStop=!0}}}}),e.Se("click",e=>{let{me:t}=e,o=0;for(;!t.I.A("modalOpen")&&o<10;)t=t.R||t.X,o+=1;let n=t;for(o=0;!n.I.A("content")&&o<100;)n=n.R||n.X,o+=1;document.N("hiddenContent");const c=Math.max(window.Te,window.qe),i=t.H/t.F;let a,d;i>1?(d=15*c,a=15*c/i):(d=15*c*i,a=15*c);const s=d/t.H;t.O.bt="1",t.O.te=t.V.te,t.V.te="font-size cubic-bezier(.4,0,1,.44) 1.5s, width cubic-bezier(.4,0,1,.44) 1.5s, height cubic-bezier(.4,0,1,.44) 1.5s, top cubic-bezier(.4,0,1,.44) 1.5s, left cubic-bezier(.4,0,1,.44) 1.5s",t.O.P=t.V.P,t.V.P="50%",t.O.ee=t.V.ee,t.V.ee="50%",t.O.$e=t.V.$e,t.V.$e=`${d}px`,t.O.D=t.V.D,t.V.D=`${a}px`,t.O.zt=t.V.zt,t.V.zt=`${10*s}px`,t.O.M=t.V.M,zIndex+=1,t.V.M=zIndex})):e.Se("click",e=>{let{me:t}=e,c=0;for(;!t.I.A("modalOpen")&&c<10;)t=t.R||t.X,c+=1;const i=document.N(n);let a=i.I.A("open");i.I.add("open"),zIndex+=1,i.V.M=zIndex.toString(),o.oe&&activateProduct(o.oe,a),t.I.A("hideOnClick")&&(t.V._="0"),animationStop=!0})}for(let e of o)e.Se("click",closeModal);const n=document.L("changeProduct");for(let e of n){const{O:t}=e,{oe:o}=t;e.Se("click",()=>{activateProduct(o),animationStop=!0})}const c=document.L("navButton"),i=document.N("menuNavigator"),a=i.R||i.X,d=a.R||a.X;for(let e of c){const{t:t}=e.O,o=document.J(`.menuHintContentWrapper.${t} .menuHintContent`),n=o.R||o.X;e.Se("mouseover",()=>{const t=a.F*scale,s=Math.floor((d.F-t)/2),r=(a.F-i.F)*scale,l=s+r;l<o.F&&(o.V.yt=`${s+r}px`,o.V.gt=`${s+r}px`),n.V.te="left 0.3s 0.2s",n.V.ee=`calc(100% - ${l}px)`;for(let t of c)t!==e&&(t.V._="0.3")}),e.Se("mouseout",()=>{o.V.yt="",o.V.gt="",n.V.te="left 0.3s",n.V.ee="100%";for(let t of c)t!==e&&(t.V._="")})}},closeHint=()=>{animationStop=!1;const e=document.N("modalHint");e.I.B("open"),zIndex-=1,e.V.M="",setTimeout(()=>{for(let e of document.C("#firstScreen .eye"))e.I.add("active")},1e3),window.Oe.Ee=!0},setPreloaderVideo=()=>{const e=["iPad","iPhone","iPod"].includes(navigator.wt)||navigator.$t.includes("Mac")&&"ontouchend"in document,t=void 0!==window.qt,o=document.N("preloader"),n=document.N("preloaderVideo");let c;t||e?(c=preloaderVideos.i.n,o.V.Tt="#FFFFFF",o.V.kt="#7382EC"):c=n.Et&&n.Et(`${preloaderVideos.e.t}; codecs=${preloaderVideos.e.o}`)?preloaderVideos.e.n:preloaderVideos.c.n,n.n=c,n.Ot=(()=>{n.Ct()})};window.Bt=(()=>{animationStop=!0,registerPseudoScrollEvent(window,getStopPseudoScroll),resizeContent(),addEvents(),setPreloaderVideo()});